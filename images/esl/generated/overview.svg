<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="592px" preserveAspectRatio="none" style="width:609px;height:592px;" version="1.1" viewBox="0 0 609 592" width="609px" zoomAndPan="magnify"><defs><filter height="300%" id="f9olqqyxrtqhz" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster de.gematik.ti.epa.fdv.service.localization--><polygon fill="#FFFFFF" filter="url(#f9olqqyxrtqhz)" points="22,148,315,148,322,171.6094,587,171.6094,587,580,22,580,22,148" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="322" y1="171.6094" y2="171.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="287" x="26" y="164.5332">de.gematik.ti.epa.fdv.service.localization</text><!--cluster de.gematik.ti.epa.fdv.service.localization.spi--><polygon fill="#FFFFFF" filter="url(#f9olqqyxrtqhz)" points="73,24,391,24,398,47.6094,401,47.6094,401,124,73,124,73,24" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="73" x2="398" y1="47.6094" y2="47.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="312" x="77" y="40.5332">de.gematik.ti.epa.fdv.service.localization.spi</text><!--class GatewayModulePathType--><rect fill="#FEFECE" filter="url(#f9olqqyxrtqhz)" height="131.0156" id="GatewayModulePathType" style="stroke: #A80036; stroke-width: 1.5;" width="170" x="401" y="308.5"/><ellipse cx="416" cy="324.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M418,321 Q418.2031,320.5 418.4375,320.25 Q418.6719,320 418.9375,320 Q419.4063,320 419.7031,320.2813 Q420,320.5625 420,321.2188 L420,322.7813 Q420,323.4375 419.7188,323.7188 Q419.4375,324 419,324 Q418.6094,324 418.3594,323.8281 Q418.1094,323.6563 418,323.2031 Q417.9531,322.8906 417.7813,322.7188 Q417.4688,322.3906 416.9063,322.2031 Q416.3438,322 415.7813,322 Q415.0781,322 414.4844,322.2813 Q413.9063,322.5625 413.4531,323.1875 Q413,323.8125 413,324.6719 L413,325.5938 Q413,326.625 413.8438,327.3125 Q414.6875,328 416.1875,328 Q417.0781,328 417.7031,327.7969 Q418.0625,327.6875 418.4688,327.3281 Q418.7344,327.125 418.875,327.0625 Q419.0156,327 419.1875,327 Q419.5156,327 419.75,327.2656 Q420,327.5156 420,327.875 Q420,328.2188 419.6563,328.625 Q419.1563,329.2188 418.3594,329.5469 Q417.3125,330 416.0313,330 Q414.5313,330 413.3281,329.4063 Q412.3594,328.9375 411.6719,327.9219 Q411,326.9063 411,325.7031 L411,324.6094 Q411,323.3594 411.5938,322.2656 Q412.2031,321.1719 413.25,320.5938 Q414.3125,320 415.5,320 Q416.2188,320 416.8438,320.25 Q417.4688,320.5 418,321 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="138" x="430" y="329.4102">GatewayModulePathType</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="402" x2="570" y1="340.5" y2="340.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="409" y="349.918"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="58" x="421" y="355.9189">path : String</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="409" y="363.7539"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="37" x="421" y="369.7549">ttl : long</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="409" y="377.5898"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="73" x="421" y="383.5908">validUntil : Date</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="402" x2="570" y1="390.0078" y2="390.0078"/><ellipse cx="412" cy="402.4258" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="421" y="405.4268">GatewayModulePathType()</text><ellipse cx="412" cy="416.2617" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="67" x="421" y="419.2627">getValidUntil()</text><ellipse cx="412" cy="430.0977" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="44" x="421" y="433.0986">getPath()</text><!--class ServiceLocator--><rect fill="#FEFECE" filter="url(#f9olqqyxrtqhz)" height="380.0625" id="ServiceLocator" style="stroke: #A80036; stroke-width: 1.5;" width="327" x="38.5" y="184"/><ellipse cx="157.25" cy="200" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M159.25,196.5 Q159.4531,196 159.6875,195.75 Q159.9219,195.5 160.1875,195.5 Q160.6563,195.5 160.9531,195.7813 Q161.25,196.0625 161.25,196.7188 L161.25,198.2813 Q161.25,198.9375 160.9688,199.2188 Q160.6875,199.5 160.25,199.5 Q159.8594,199.5 159.6094,199.3281 Q159.3594,199.1563 159.25,198.7031 Q159.2031,198.3906 159.0313,198.2188 Q158.7188,197.8906 158.1563,197.7031 Q157.5938,197.5 157.0313,197.5 Q156.3281,197.5 155.7344,197.7813 Q155.1563,198.0625 154.7031,198.6875 Q154.25,199.3125 154.25,200.1719 L154.25,201.0938 Q154.25,202.125 155.0938,202.8125 Q155.9375,203.5 157.4375,203.5 Q158.3281,203.5 158.9531,203.2969 Q159.3125,203.1875 159.7188,202.8281 Q159.9844,202.625 160.125,202.5625 Q160.2656,202.5 160.4375,202.5 Q160.7656,202.5 161,202.7656 Q161.25,203.0156 161.25,203.375 Q161.25,203.7188 160.9063,204.125 Q160.4063,204.7188 159.6094,205.0469 Q158.5625,205.5 157.2813,205.5 Q155.7813,205.5 154.5781,204.9063 Q153.6094,204.4375 152.9219,203.4219 Q152.25,202.4063 152.25,201.2031 L152.25,200.1094 Q152.25,198.8594 152.8438,197.7656 Q153.4531,196.6719 154.5,196.0938 Q155.5625,195.5 156.75,195.5 Q157.4688,195.5 158.0938,195.75 Q158.7188,196 159.25,196.5 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="81" x="177.75" y="204.9102">ServiceLocator</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="39.5" x2="364.5" y1="216" y2="216"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46.5" y="225.418"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="65" x="58.5" y="231.4189">LOG : Logger</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46.5" y="239.2539"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="69" x="58.5" y="245.2549">HTTPS : String</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46.5" y="253.0898"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="158" x="58.5" y="259.0908">MAX_LOOKUP_PER_MINUTE : int</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46.5" y="266.9258"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="129" x="58.5" y="272.9268">ONE_MINUTE_MILLIS : long</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46.5" y="280.7617"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="59" x="58.5" y="286.7627">fqdn : String</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46.5" y="294.5977"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="83" x="58.5" y="300.5986">running : boolean</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46.5" y="308.4336"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="58.5" y="314.4346">error : String</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46.5" y="322.2695"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="88" x="58.5" y="328.2705">records : Record[]</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46.5" y="336.1055"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="111" x="58.5" y="342.1064">lookupFailureCount : int</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46.5" y="349.9414"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="116" x="58.5" y="355.9424">lookupFailureDate : Date</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46.5" y="363.7773"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="137" x="58.5" y="369.7783">lookupStatus : LookupStatus</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46.5" y="377.6133"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="301" x="58.5" y="383.6143">dnsTxtRecordValues : Map&lt;String, GatewayModulePathType&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="39.5" x2="364.5" y1="390.0313" y2="390.0313"/><ellipse cx="49.5" cy="402.4492" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="82" x="58.5" y="405.4502">ServiceLocator()</text><ellipse cx="49.5" cy="416.2852" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="39" x="58.5" y="419.2861">lookup()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46.5" y="427.1211"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="58.5" y="433.1221">conditionalLookup()</text><ellipse cx="49.5" cy="443.957" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="58.5" y="446.958">endpointURLForInterface()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46.5" y="454.793"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="157" x="58.5" y="460.7939">checkLookupFailureTimeRange()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46.5" y="468.6289"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="121" x="58.5" y="474.6299">fillDnsTxtRecordValues()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46.5" y="482.4648"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="58.5" y="488.4658">fillModuleList()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46.5" y="496.3008"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="58.5" y="502.3018">checkTxtVersion()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46.5" y="510.1367"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="107" x="58.5" y="516.1377">handleLookupFailure()</text><ellipse cx="49.5" cy="526.9727" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="89" x="58.5" y="529.9736">getLookupStatus()</text><ellipse cx="49.5" cy="540.8086" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="111" x="58.5" y="543.8096">getHomeCommunityID()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46.5" y="551.6445"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="58" x="58.5" y="557.6455">handleTTL()</text><!--class de.gematik.ti.epa.fdv.service.localization.spi.IServiceLocalizer--><rect fill="#FEFECE" filter="url(#f9olqqyxrtqhz)" height="48" id="de.gematik.ti.epa.fdv.service.localization.spi.IServiceLocalizer" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="140" y="60"/><ellipse cx="155" cy="76" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M157,72.5 Q157.2031,72 157.4375,71.75 Q157.6719,71.5 157.9375,71.5 Q158.4063,71.5 158.7031,71.7813 Q159,72.0625 159,72.7188 L159,74.2813 Q159,74.9375 158.7188,75.2188 Q158.4375,75.5 158,75.5 Q157.6094,75.5 157.3594,75.3281 Q157.1094,75.1563 157,74.7031 Q156.9531,74.3906 156.7813,74.2188 Q156.4688,73.8906 155.9063,73.7031 Q155.3438,73.5 154.7813,73.5 Q154.0781,73.5 153.4844,73.7813 Q152.9063,74.0625 152.4531,74.6875 Q152,75.3125 152,76.1719 L152,77.0938 Q152,78.125 152.8438,78.8125 Q153.6875,79.5 155.1875,79.5 Q156.0781,79.5 156.7031,79.2969 Q157.0625,79.1875 157.4688,78.8281 Q157.7344,78.625 157.875,78.5625 Q158.0156,78.5 158.1875,78.5 Q158.5156,78.5 158.75,78.7656 Q159,79.0156 159,79.375 Q159,79.7188 158.6563,80.125 Q158.1563,80.7188 157.3594,81.0469 Q156.3125,81.5 155.0313,81.5 Q153.5313,81.5 152.3281,80.9063 Q151.3594,80.4375 150.6719,79.4219 Q150,78.4063 150,77.2031 L150,76.1094 Q150,74.8594 150.5938,73.7656 Q151.2031,72.6719 152.25,72.0938 Q153.3125,71.5 154.5,71.5 Q155.2188,71.5 155.8438,71.75 Q156.4688,72 157,72.5 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="92" x="169" y="80.9102">IServiceLocalizer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="141" x2="263" y1="92" y2="92"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="141" x2="263" y1="100" y2="100"/><!--link de.gematik.ti.epa.fdv.service.localization.spi.IServiceLocalizer to ServiceLocator--><path d="M202,128.193 C202,144.116 202,163.339 202,183.93 " fill="none" id="de.gematik.ti.epa.fdv.service.localization.spi.IServiceLocalizer-ServiceLocator" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="195,128.081,202,108.081,209,128.081,195,128.081" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml

package de.gematik.ti.epa.fdv.service.localization {
    class GatewayModulePathType {
        - path : String
        - ttl : long
        - validUntil : Date
        + GatewayModulePathType()
        + getValidUntil()
        + getPath()
    }
  }


  package de.gematik.ti.epa.fdv.service.localization {
    class ServiceLocator {
        {static} - LOG : Logger
        {static} - HTTPS : String
        {static} - MAX_LOOKUP_PER_MINUTE : int
        {static} - ONE_MINUTE_MILLIS : long
        - fqdn : String
        - running : boolean
        - error : String
        - records : Record[]
        - lookupFailureCount : int
        - lookupFailureDate : Date
        - lookupStatus : LookupStatus
        - dnsTxtRecordValues : Map<String, GatewayModulePathType>
        + ServiceLocator()
        + lookup()
        - conditionalLookup()
        + endpointURLForInterface()
        - checkLookupFailureTimeRange()
        - fillDnsTxtRecordValues()
        - fillModuleList()
        - checkTxtVersion()
        - handleLookupFailure()
        + getLookupStatus()
        + getHomeCommunityID()
        - handleTTL()
    }
  }

  ServiceLocator -up-|> de.gematik.ti.epa.fdv.service.localization.spi.IServiceLocalizer
@enduml

PlantUML version 1.2019.06(Fri May 24 19:10:25 CEST 2019)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.4+10-b304.69
Operating System: Windows 7
OS Version: 6.1
Default Encoding: Cp1252
Language: de
Country: DE
--></g></svg>